window.LogRocket&&!window.__logrocketInitialized&&(window.__logrocketInitialized=!0,LogRocket.init("luu2kj/fresh-air",{mergeIframes:!0,childDomains:["*"]}));let isOverlayOpen=!1,savedScrollPosition=0;const fullscreenDiv=document.createElement("div");function createCloseButton(){const closeButton=document.createElement("button");return closeButton.innerHTML="&times;",closeButton.style.position="absolute",closeButton.style.top="20px",closeButton.style.right="20px",closeButton.style.background="rgba(0,0,0,0.6)",closeButton.style.color="white",closeButton.style.border="none",closeButton.style.padding="10px 15px",closeButton.style.cursor="pointer",closeButton.style.fontSize="24px",closeButton.style.borderRadius="50%",closeButton.style.display="none",closeButton.addEventListener("click",(event=>{event.stopPropagation(),closeOverlay()})),fullscreenDiv.appendChild(closeButton),closeButton}fullscreenDiv.id="fullscreen-overlay",fullscreenDiv.style.position="fixed",fullscreenDiv.style.left="0",fullscreenDiv.style.bottom="-100%",fullscreenDiv.style.width="100%",fullscreenDiv.style.height="100%",fullscreenDiv.style.backgroundColor="rgba(0,0,0,0.75)",fullscreenDiv.style.zIndex="9999",fullscreenDiv.style.transition="bottom 0.5s cubic-bezier(0.25, 1, 0.5, 1)",fullscreenDiv.style.display="flex",fullscreenDiv.style.alignItems="center",fullscreenDiv.style.justifyContent="center",fullscreenDiv.style.pointerEvents="none",document.body.appendChild(fullscreenDiv);const closeButton=createCloseButton();function easeInOutCubic(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b}function animateDiv(open=!0,callback){let start=null;const startPosition=open?-100:0,endPosition=open?0:-100;window.requestAnimationFrame((function step(timestamp){start||(start=timestamp);const progress=timestamp-start,newPosition=easeInOutCubic(progress,startPosition,endPosition-startPosition,500);fullscreenDiv.style.bottom=newPosition+"%",progress<500?window.requestAnimationFrame(step):(fullscreenDiv.style.bottom=endPosition+"%",isOverlayOpen=open,fullscreenDiv.style.pointerEvents=open?"auto":"none",closeButton.style.display=open?"block":"none",callback&&setTimeout(callback,100))}))}function clearFullscreenDiv(){fullscreenDiv.innerHTML="",fullscreenDiv.appendChild(closeButton)}function extractYouTubeID(url){const match=url.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return match?match[1]:null}function closeOverlay(){isOverlayOpen&&(animateDiv(!1),setTimeout((()=>{enableScroll(),window.scrollTo(0,savedScrollPosition),clearFullscreenDiv()}),500))}function addMediaContent(mediaUrl){clearFullscreenDiv();const isMobile=window.innerWidth<=768,mediaContainer=document.createElement("div");if(mediaContainer.style.position="relative",mediaContainer.style.width=isMobile?"90%":"70%",mediaContainer.style.maxWidth=isMobile?"90%":"70%",mediaContainer.style.aspectRatio="16 / 9",fullscreenDiv.appendChild(mediaContainer),mediaUrl.includes("canva.com")){const iframe=document.createElement("iframe");iframe.src=mediaUrl,iframe.style.width="100%",iframe.style.height="100%",iframe.style.border="none",iframe.style.backgroundColor="var(--swatches--off-white)",iframe.setAttribute("tabindex","-1"),iframe.addEventListener("load",(()=>{iframe.style.backgroundColor="transparent"})),mediaContainer.appendChild(iframe);const fullscreenButton=document.createElement("button");fullscreenButton.innerHTML="â›¶",fullscreenButton.style.position="absolute",fullscreenButton.style.top="10px",fullscreenButton.style.left="10px",fullscreenButton.style.background="rgba(0,0,0,0.6)",fullscreenButton.style.color="white",fullscreenButton.style.border="none",fullscreenButton.style.padding="12px",fullscreenButton.style.cursor="pointer",fullscreenButton.style.fontSize="20px",fullscreenButton.style.borderRadius="4px",fullscreenButton.style.display="none",fullscreenButton.addEventListener("click",(event=>{event.stopPropagation(),iframe.requestFullscreen?iframe.requestFullscreen():iframe.mozRequestFullScreen?iframe.mozRequestFullScreen():iframe.webkitRequestFullscreen?iframe.webkitRequestFullscreen():iframe.msRequestFullscreen&&iframe.msRequestFullscreen()})),mediaContainer.appendChild(fullscreenButton),animateDiv(!0,(()=>{isMobile||(fullscreenButton.style.display="block")}))}else if(mediaUrl.includes("youtu.be")||mediaUrl.includes("youtube.com")){const videoId=extractYouTubeID(mediaUrl);if(!videoId)return;const iframe=document.createElement("iframe");iframe.src="https://www.youtube.com/embed/"+videoId+"?autoplay=1&controls=1&modestbranding=1&showinfo=0&rel=0",iframe.allow="fullscreen",iframe.style.width="100%",iframe.style.height="100%",iframe.style.border="none",iframe.style.backgroundColor="var(--swatches--black)",iframe.setAttribute("tabindex","-1"),iframe.addEventListener("load",(()=>{iframe.style.backgroundColor="transparent"})),mediaContainer.appendChild(iframe)}}function disableScroll(){document.body.style.overflow="hidden"}function enableScroll(){document.body.style.overflow=""}document.addEventListener("keydown",(event=>{"Escape"===event.key&&isOverlayOpen&&!document.fullscreenElement&&closeOverlay()}));const mediaWrappers=document.querySelectorAll(".lesson-media-wrapper");mediaWrappers.forEach((wrapper=>{wrapper.addEventListener("click",(event=>{event.preventDefault(),savedScrollPosition=window.pageYOffset;const mediaUrl=wrapper.querySelector("[data-lesson-media-url]").getAttribute("data-lesson-media-url");mediaUrl&&(addMediaContent(mediaUrl),disableScroll(),animateDiv(!0))}))})),fullscreenDiv.addEventListener("click",(event=>{event.target===fullscreenDiv&&closeOverlay()})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||window.scrollTo(0,savedScrollPosition)})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".lesson-media-wrapper").forEach((wrapper=>{const mediaUrlElement=wrapper.querySelector("[data-lesson-media-url]");if(mediaUrlElement){const mediaUrl=mediaUrlElement.getAttribute("data-lesson-media-url");if(mediaUrl&&(mediaUrl.includes("youtu.be")||mediaUrl.includes("youtube.com"))){const videoId=extractYouTubeID(mediaUrl);if(videoId){const thumbnailUrl="https://img.youtube.com/vi/"+videoId+"/hqdefault.jpg",srcset="https://img.youtube.com/vi/"+videoId+"/mqdefault.jpg 320w, https://img.youtube.com/vi/"+videoId+"/hqdefault.jpg 480w, https://img.youtube.com/vi/"+videoId+"/sddefault.jpg 640w, https://img.youtube.com/vi/"+videoId+"/maxresdefault.jpg 1280w",thumbImage=wrapper.querySelector("img.lesson-media-thumbnail");thumbImage&&(thumbImage.src=thumbnailUrl,thumbImage.srcset=srcset)}}}}))}));